pipeline {
Â  Â  agent any

Â  Â  tools {
Â  Â  Â  Â  jdk 'JDK21'
Â  Â  Â  Â  maven 'Maven3'
Â  Â  }

Â  Â  stages {
Â  Â  Â  Â  stage('Checkout') {
Â  Â  Â  Â  Â  Â  steps {
Â  Â  Â  Â  Â  Â  Â  Â  echo 'ğŸ“¥ Cloning repository...'
Â  Â  Â  Â  Â  Â  Â  Â  // Utilisation de HTTPS pour Ã©viter l'erreur de protocole
Â  Â  Â  Â  Â  Â  Â  Â  git branch: 'main', url: 'https://github.com/rirou11/devops.git' 
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  stage('Build') {
Â  Â  Â  Â  Â  Â  steps {
Â  Â  Â  Â  Â  Â  Â  Â  echo 'âš™ï¸ Running Maven build...'
                // IMPORTANT: Navigue dans le rÃ©pertoire 'DevOps-main' oÃ¹ se trouve le pom.xml
Â  Â  Â  Â  Â  Â  Â  Â  dir('DevOps-main') { 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  sh 'mvn clean compile -U'
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }
Â  Â  }

Â  Â  post {
Â  Â  Â  Â  success {
Â  Â  Â  Â  Â  Â  echo 'âœ… Build completed successfully!'
Â  Â  Â  Â  }
Â  Â  Â  Â  failure {
Â  Â  Â  Â  Â  Â  echo 'âŒ Build failed â€” check console output for details.'
Â  Â  Â  Â  }
Â  Â  }
}
